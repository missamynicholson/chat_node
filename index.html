<!DOCTYPE html>
<html>
<head>
  <script src='http://code.jquery.com/jquery-1.6.4.min.js'></script>
  <script>
  var counter = 0; //global message count
  var poll = function() {
    $.getJSON('/poll/'+counter, function(response) { //first request goes to /poll/0
      counter = response.count; //increment counter if got new message
      var elem = $('#output');
      elem.text(elem.text() + response.append); //appends the new message onto the end
      poll(); //recursively starts a new poll
    });
  }
  poll();  //starts polling first time
  </script>
</head>
<body>
 <textarea id='output' style='width: 100%; height: 100%'>
 </textarea>
</body>
</html>
